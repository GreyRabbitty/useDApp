# Wallet Connect

In this tutorial, we will go through the steps of integrating WalletConnect into your dapp (you can read more about this wallet on: https://walletconnect.com/).

## Prerequisites

The tutorial assumes the user has already started with the basics of `useDApp`.

See the [Getting Started](/docs) guide if you are a new user.

## WalletConnect v1 vs v2

WalletConnect v1 has been shut down on 28 June 2023. The only official version of WalletConnect is now v2. `usedapp` has `WalletConnectV2Connector` which is compatible. The connector is provided by the `@usedapp/wallet-connect-v2-connector` package. You can add support to your dapp by following adding the following code to your `usedapp` config:

```ts
connectors: {
    ...
    walletConnectV2: new WalletConnectV2Connector({
      projectId: <YOUR_WALLETCONNECT_PROJECT_ID>,
      chains: [Mainnet],
      rpcMap: {
        1: 'https://mainnet.infura.io/v3/<YOUR_INFURA_KEY>',
      },
    }),
    ...
  },
```

Now you can connect to WalletConnect v2 by calling `activateBrowserWallet` with the connector name:

```ts
import { useEthers } from '@usedapp/core'

...

const { activateBrowserWallet } = useEthers()

...

const handleConnectWalletConnect = () => {
    activateBrowserWallet({ type: 'walletConnectV2' })
}
```

## Known issues

### Chain ID

In WalletConnect v2 you have specify the supported chains by your dapp before connecting to the wallet. This can cause issues with some wallets, for instance Gnosis Safe will reject connection attemp if the correct chain id is not specified or if there are more than one chain id specified. The solution is to specify only one chain id in the `chains` array in the connector config. For instance, if you want to support only Optimsim, you can do the following:

```ts
connectors: {
    ...
    walletConnectV2: new WalletConnectV2Connector({
      projectId: <YOUR_WALLETCONNECT_PROJECT_ID>,
      chains: [Optimism],
      rpcMap: {
        1: 'https://optimism.infura.io/v3/<YOUR_INFURA_KEY>',
      },
    }),
    ...
  },
```
