---
sidebar_position: 1
---

# Connecting to network

## Read-only

To connect to the network in read-only mode, provide ``readOnlyChainId`` and ``readOnlyUrls`` fields in application configuration.

See example configuration below:

```tsx
  import { Mainnet } from '@usedapp/core'

  const config = {
    readOnlyChainId: Mainnet.chainID,
    readOnlyUrls: {
      [Mainnet.chainID]: 'https://mainnet.infura.io/v3/62687d1a985d4508b2b7a24827551934',
    },
  }
```

## Browser wallet

To connect to a wallet in a web3-enabled browser, use ``activateBrowserWallet`` returned by ``useEthers()``.
Once connected ``account`` variable will be available.

See example below:

```tsx
  export function App() {
    const { activateBrowserWallet, account } = useEthers()
    return (
      <div>
        {!account && <button onClick={activateBrowserWallet}> Connect </button>}
        {account && <p>Account: {account}</p>}
      </div>
    )
  }
```

## useEthers

``useEthers`` hook returns a number of useful functions and variables, see below:

- ``account`` - current user account (or ``null`` if not connected or connected in read-only mode)

- ``chainId`` - current chainId (or ``undefined`` if not connected)

- ``library`` - an instance of ethers [Web3Provider](https://docs.ethers.io/v5/api/providers/other/#Web3Provider) (or ``undefined`` if not connected). Read more about ethers providers [here](https://docs.ethers.io/v5/api/providers/).

- ``active`` - boolean that indicates if provider is connected (read or write mode)

- ``activate`` - function that allows to connect to a wallet. This is a [web3-react](https://github.com/NoahZinsmeister/web3-react) function that can take various connectors.

- ``deactivate`` - function that disconnects wallet

- ``error`` - an error that occurred during connecting (e.g. connection is broken, unsupported network)



## Example

Example below demonstrates how to manage and use connection.

Application allow to see the balance of Ethereum 2.0 staking contracts in read-only mode.
When wallet is connected additionally it shows user's account along with it's balance.

Example is available [here](https://example.usedapp.io/balance).

```tsx
  import { Mainnet } from '@usedapp/core'

  const config = {
    readOnlyChainId: Mainnet.chainId,
    readOnlyUrls: {
      [Mainnet.chainId]: 'https://mainnet.infura.io/v3/62687d1a985d4508b2b7a24827551934',
    },
  }

  ReactDOM.render(
    <DAppProvider config={config}>
      <App />
    </DAppProvider>
    document.getElementById('root')
  )

  const STAKING_CONTRACT = '0x00000000219ab540356cBB839Cbe05303d7705Fa'

  export function App() {
    const { activateBrowserWallet, deactivate, account } = useEthers()
    const userBalance = useEtherBalance(account)
    const stakingBalance = useEtherBalance(STAKING_CONTRACT)

    return (
      <div>
        {!account && <button onClick={activateBrowserWallet}> Connect </button>}
        {account && <button onClick={deactivate}> Disconnect </button>}
        {stakingBalance && <p>ETH2 staking balance: {formatEther(stakingBalance)} ETH </p>}
        {account && <p>Account: {account}</p>}
        {userBalance && <p>Ether balance: {formatEther(userBalance)} ETH </p>}
      </div>
    )
  }
```

## Handling wallet activation errors

It is possible to access wallet activation errors by checking if `const {error} = useEthers()` changes :

```tsx
  const [activateError, setActivateError] = useState('')
  const { error } = useEthers()
  useEffect(() => {
    if (error) {
      setActivateError(error.message)
    }
  }, [error])

  const activate = async () => {
    setActivateError('')
    activateBrowserWallet()
  }
```
